/* VECTOR_REF.asm * Takes a vector and an index n and Returns in R0 the element in index n of the vector */ VECTOR_REF:  PUSH(FP);  MOV(FP, SP);  PUSH(R1);    CMP(FPARG(1), IMM(2));  JUMP_LT(HAS_NO_ARGS_VECTOR_REF);  JUMP_GT(TOO_MANY_ARGS_VECTOR_REF);  CMP(IND(FPARG(2)),T_VECTOR);  JUMP_NE(NOT_VALID_ARG_VECTOR_REF);  CMP(IND(FPARG(3)),T_INTEGER);  JUMP_NE(NOT_VALID_ARG_VECTOR_REF);  CMP(INDD(FPARG(3),1),0);  JUMP_LT(NOT_VALID_ARG_VECTOR_REF);  MOV(R1,INDD(FPARG(3),1));  CMP(R1,INDD(FPARG(2),1));  JUMP_GE(NOT_VALID_ARG_VECTOR_REF);  ADD(R1,IMM(2));  MOV(R0,INDD(FPARG(2),R1));  POP(R1);  POP(FP);  RETURN;    NOT_VALID_ARG_VECTOR_REF:  CALL(ERROR_NOT_VALID_ARG);    HAS_NO_ARGS_VECTOR_REF:  CALL(ERROR_NOT_ENOUGH_ARGS);    TOO_MANY_ARGS_VECTOR_REF:  CALL(ERROR_TOO_MANY_ARGS);