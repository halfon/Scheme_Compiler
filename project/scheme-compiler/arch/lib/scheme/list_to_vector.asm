/* LIST_TO_VECTOR.asm * Takes a list and Returns in R0 a vector contains the elements that were in the given list */ LIST_TO_VECTOR:  PUSH(FP);  MOV(FP, SP);  PUSH(R1);  PUSH(R2);    CMP(FPARG(1), IMM(1));  JUMP_LT(HAS_NO_ARGS_LIST_TO_VECTOR);  JUMP_GT(TOO_MANY_ARGS_LIST_TO_VECTOR);  CMP(IND(FPARG(2)),T_NIL);  JUMP_EQ(CREATE_EMPTY_LIST_TO_VECTOR);  CMP(IND(FPARG(2)),T_PAIR);  JUMP_NE(NOT_VALID_ARG_LIST_TO_VECTOR);  MOV(R1,IMM(1));  MOV(R2,FPARG(2));    START_LIST_TO_VECTOR:  PUSH(INDD(R2,1));  MOV(R2,INDD(R2,2));  CMP(IND(R2),T_PAIR);  JUMP_NE(END_LIST_TO_VECTOR);  INCR(R1);  JUMP(START_LIST_TO_VECTOR);      END_LIST_TO_VECTOR:  PUSH(R1);  CALL(MAKE_SOB_VECTOR);  INCR(R1);  DROP(R1);   POP(R2);  POP(R1);  POP(FP);  RETURN;    CREATE_EMPTY_LIST_TO_VECTOR:  PUSH(IMM(0));  CALL(MAKE_SOB_VECTOR);  DROP(1);  POP(R2);  POP(R1);  POP(FP);  RETURN;    NOT_VALID_ARG_LIST_TO_VECTOR:  CALL(ERROR_NOT_VALID_ARG);    HAS_NO_ARGS_LIST_TO_VECTOR:  CALL(ERROR_NOT_ENOUGH_ARGS);    TOO_MANY_ARGS_LIST_TO_VECTOR:  CALL(ERROR_TOO_MANY_ARGS);